apply plugin: "com.android.application"

import com.facebook.react.gradle.JAVAC_WRAPPER_GRADLE_VERSION

buildscript {
    ext {
        buildToolsVersion = "34.0.0"
        compileSdk = 34
        targetSdk = 34
        kotlinVersion = "1.9.21"

        // We use NDK 23 which has the best GCC performance
        ndkVersion = "23.1.7779620"
    }
}

plugins {
    id("com.facebook.react")
}

/**
 * This is the configuration block to customize your React Native Android app.
 * By default you don't need to apply any configurations, usually you can just
 * add an entry here to let the plugin pick it up automatically.
 *
 * To learn more about this file:
 * - https://github.com/facebook/react-native/blob/main/packages/react-native-gradle-plugin/src/main/groovy/com/facebook/react/ReactExtension.groovy
 */
react {
    /* the configuration of the Android app */
    entryFile = file("/index.js")
    bundleAssetName = "index.android.bundle"

    /* additional hermes compiler configuration */
    debuggableExtensions {
        // https://reactnative.dev/docs/hermes#debugging-application-java-script
        // This configures whether Hermes should generate source maps for JavaScript.
        // https://github.com/facebook/react-native/blob/main/packages/react-native-gradle-plugin/src/main/groovy/com/facebook/react/ReactExtension.groovy#L209-L212
        enableHermesSourceMap = false
    }
}

/**
 * The Java compilers are configured by the build.gradle file (in android/app)
 * and can be overridden here with the following configuration:
 *
 * java {
 *   sourceCompatibility JavaVersion.VERSION_17
 *   targetCompatibility JavaVersion.VERSION_17
 * }
 */
java {
    // https://developer.android.com/build/jvm-jtoolchain
    toolchain {
        languageVersion = JavaLanguageVersion.of(17)
    }
}

android {
    namespace = "com.warehousescanner"
    compileSdk = 34

    defaultConfig {
        applicationId = "com.warehousescanner"
       24
        targetSdk = 34 minSdk = 
        versionCode = 1
        versionName = "1.0.0"

        /**
         * Required for the Hermes engine to function properly.
         */
        ndk {
            abiFilters "armeabi-v7a", "arm64-v8a", "x86", "x86_64"
        }
    }

    signingConfigs {
        debug {
            storeFile file('debug.keystore')
            storePassword 'android'
            keyAlias 'androiddebugkey'
            keyPassword 'android'
        }
    }

    buildTypes {
        debug {
            signingConfig signingConfigs.debug
            // https://reactnative.dev/docs/optimizing-gradle#enabling-the-ram-format
            // This configures whether the Gradle build should use the
            // "Resource shrinking" feature (--max-workers).
            // https://github.com/facebook/react-native/blob/main/packages/react-native-gradle-plugin/src/main/groovy/com/facebook/react/ReactExtension.groovy#L204-L207
            resources {
                // https://developer.android.com/reference/tools/proguard/androidx-annotations
                // -dontwarn org.bouncycastle.**
                // -dontwarn org.conscrypt.**
                // -dontwarn org.openjsse.**
                disable '+:deprecated_member_usage'
            }
        }
        release {
            signingConfig signingConfigs.debug
            // Minification reduces the size of the APK and removes unused code.
            // This is currently experimental, so we recommend only enabling it in
            // CI/CD for now.
            // https://reactnative.dev/docs/optimizing-gradle#enabling-the-ram-format
            // We don't want to shrink resources for debug builds, because we want
            // to be able to debug them.
            resources {
                shrinkResources false
            }
            // https://developer.android.com/reference/tools/proguard/androidx-annotations
            // -dontwarn org.bouncycastle.**
            // -dontwarn org.conscrypt.**
            // -dontwarn org.openjsse.**
        }
    }
}

/**
 * Specifies the path to the native library (.so) files that are part of
 * the native build.
 *
 * By default the React Native Gradle plugin generates a task that
 * copies the native libraries from the node_modules directory
 * to the build directory.
 *
 * However, some third-party libraries ship their own native libraries,
 * so you may need to customize this configuration.
 */
android.nativeBuild {
    ndk {
        // The path to the native libraries (.so) that should be copied.
        // The React Native Gradle plugin already handles this, so you
        // typically don't need to change this.
        libPaths = []
    }
}

/**
 * The Kotlin compiler configuration.
 */
kotlin {
    // https://kotlinlang.org/docs/compiler-reference.html#compiler-options
    // The Kotlin compiler has a large number of options.
    // This is currently experimental, so we recommend only enabling it in
    // CI/CD for now.
    // https://github.com/facebook/react-native/blob/main/packages/react-native-gradle-plugin/src/main/groovy/com/facebook/react/ReactExtension.groovy#L230-L237
    freeCompilerArgs += ["-Xjvm-default=all"]
}

/**
 * Fused Location Provider
 * https://developers.google.com/android/reference/com/google/android/gms/location/FusedLocationProvider
 */
repositories {
    google()
    mavenCentral()
}

dependencies {
    // implementation "androidx.appcompat:appcompat:1.6.1"
    implementation "androidx.core:core-ktx:1.12.0"

    // Dependencies for the Hermes engine
    implementation "com.facebook.react:hermes-engine"
    implementation "com.facebook.react:react-android"

    // Dependencies for React Native Maps
    implementation "com.google.android.gms:play-services-base:18.2.0"
    implementation "com.google.android.gms:play-services-maps:18.2.0"
    implementation "com.google.android.gms:play-services-location:21.0.1"

    // Dependencies for React Native Vision Camera
    implementation "androidx.camera:camera-core:1.3.1"
    implementation "androidx.camera:camera-camera2:1.3.1"
    implementation "androidx.camera:camera-lifecycle:1.3.1"
    implementation "androidx.camera:camera-view:1.3.1"
    implementation "org.jetbrains.kotlinx:kotlinx-coroutines-android:1.7.3"
    implementation "org.jetbrains.kotlinx:kotlinx-coroutines-core:1.7.3"
    implementation "com.google.mlkit:barcode-scanning:17.2.0"

    debugImplementation("com.facebook.flipper:flipper-android:0.244.0")
    debugImplementation("com.facebook.flipper:flipper-react-native:0.244.0")

    // https://github.com/facebook/react-native/blob/main/packages/react-native-gradle-plugin/src/main/groovy/com/facebook/react/ReactExtension.groovy#L260-L261
    // https://developer.android.com/reference/tools/proguard/androidx-annotations
    // -dontwarn org.bouncycastle.**
    // -dontwarn org.conscrypt.**
    // -dontwarn org.openjsse.**
    // To override the default ProGuard configuration for a module,
    // add a file to the module's directory containing the ProGuard
    // configuration (for example, "proguard-rules.pro").
    // For more details, see:
    // https://developer.android.com/guide/developing/products/data-storage#process-considerations
}

apply from: file("../../node_modules/@react-native-community/cli-platform-android/native_modules.gradle")
apply from: file("../../node_modules/react-native-gradle-plugin/src/main/groovy/com/facebook/react/ReactSettings.gradle")
